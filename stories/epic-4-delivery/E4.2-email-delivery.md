# E4.2: Email Delivery

**Epic:** E4 - Delivery Layer
**Story ID:** E4.2
**Story Points:** 5
**Priority:** P1 (High)
**Type:** Feature
**Status:** ⏸️ Blocked

---

## User Story

**As a** user
**I want to** receive events via email
**So that** I can read them in my inbox

---

## Acceptance Criteria

- [ ] Implement `src/delivery/email.py` with `EmailDelivery` class
- [ ] Use `smtplib` for sending (Gmail SMTP or configurable)
- [ ] Create HTML email template:
  - Subject: "Nevada County Kids Events - [Date Range]"
  - Header with summary (X events found)
  - Event cards with: title, date, venue, description, source
  - Footer with timestamp
- [ ] Format events into HTML using template
- [ ] Send email to configured recipient (from `.env`)
- [ ] Handle SMTP errors gracefully (auth failure, network issues)
- [ ] Return `DeliveryResult` with success status
- [ ] Test with real email (manual verification)

---

## Environment Variables

```
EMAIL_SMTP_SERVER=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_USERNAME=your-email@gmail.com
EMAIL_PASSWORD=your-app-password
EMAIL_RECIPIENT=your-email@gmail.com
```

---

## Dependencies

**Depends on:** E4.1 (Delivery Interface)
**Blocks:** E4.5 (Delivery Router)

---

## Definition of Done

- [ ] Email sent successfully
- [ ] HTML formatting looks good
- [ ] SMTP errors handled gracefully
- [ ] Test email received in inbox
- [ ] validate_config() checks credentials

---

## Technical Notes

For Gmail, use **App Password** (not regular password):
1. Enable 2FA on Google account
2. Generate App Password in account settings
3. Use App Password in EMAIL_PASSWORD

---

**Created:** 2025-10-07
**Last Updated:** 2025-10-07
